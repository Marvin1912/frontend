<div class="h-100 d-flex flex-column p-2">

  <header class="pb-2">
    <div class="d-flex justify-content-between align-items-center">
      <h1 class="mb-0">Vocabulary List</h1>
      <button
        mat-icon-button
        color="primary"
        aria-label="Go to home"
        routerLink="/"
        type="button"
      >
        <mat-icon>home</mat-icon>
      </button>
    </div>
  </header>

  <div class="pb-2">
    <div class="d-flex justify-content-between">
      <div>
        <input type="file" (change)="onFileSelected($event)"/>
        <button (click)="uploadFile()">Upload File</button>
      </div>
    </div>
  </div>

  <div class="pb-2">
    <button (click)="downloadFile()">Download File</button>
  </div>

  <div class="row m-0">
    <div class="col-3 p-0 d-flex flex-column flex-shrink-1">
      <mat-form-field>
        <mat-label>Filter</mat-label>
        <input matInput (keyup)="applyFilter($event)">
      </mat-form-field>
    </div>
    <div class="col-5">
      <mat-checkbox
        [(ngModel)]="withoutArticle"
        (change)="filterWithoutArticle('withoutArticle')"
      >Without Article
      </mat-checkbox>
      <mat-checkbox
        [(ngModel)]="markedAsupdated"
        (change)="filterMarkedAsUpdated('markedAsUpdated')"
      >Updated
      </mat-checkbox>
      <mat-checkbox
        [(ngModel)]="withoutDescription"
        (change)="filterWithoutDescription('withoutDescription')"
      >Without Description
      </mat-checkbox>
    </div>
    <div class="col-4">
      @if (hasActiveFilters()) {
        <div class="alert alert-info mb-0 py-2 px-3">
          <small>
            <strong>{{ filteredCount() }}</strong> of <strong>{{ totalCount() }}</strong> entries match current filters
          </small>
        </div>
      }
    </div>
  </div>

  <div class="border border-black border-1 overflow-auto">
    <div>
      <table mat-table [dataSource]="flashcards" matSort>

        <ng-container matColumnDef="deck">
          <th mat-header-cell *matHeaderCellDef>deck</th>
          <td mat-cell *matCellDef="let element">{{ element.deck }}</td>
        </ng-container>

        <ng-container matColumnDef="front">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>front</th>
          <td mat-cell *matCellDef="let element">{{ element.front }}</td>
        </ng-container>

        <ng-container matColumnDef="back">
          <th mat-header-cell *matHeaderCellDef>back</th>
          <td mat-cell *matCellDef="let element">{{ element.back }}</td>
        </ng-container>

        <ng-container matColumnDef="description">
          <th mat-header-cell *matHeaderCellDef>description</th>
          <td mat-cell *matCellDef="let element">{{ element.description }}</td>
        </ng-container>

        <ng-container matColumnDef="ankiId">
          <th mat-header-cell *matHeaderCellDef>ankiId</th>
          <td mat-cell *matCellDef="let element">{{ element.ankiId }}</td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr
          mat-row
          *matRowDef="let word; columns: displayedColumns;"
          (click)="navigateToWord(word.id)"
        ></tr>
      </table>
    </div>
  </div>

</div>
